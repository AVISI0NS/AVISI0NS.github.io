---
date: 1111-11-04
title: How
categories:
author_staff_member:
---
### 데이터 분석 방법

AVISIONS는 whoosh 라이브러리를 이용한 검색엔진을 통해 강좌 추천 서비스를 구현했습니다. 만약 구글, 네이버 등의 검색창에 사용자가 '질문'을 던지면 해당 웹 검색 사이트에서는 여러 문서들을 '답변'으로서 제공합니다. 이때 고객의 질문에 최대한 정확하게 '답변'하기 위해 텍스트 유사도가 이용됩니다. AVISIONS는 위 엔진을 이용해 채용 정보를 '질문'으로서 던지고 강의계획서와의 텍스트 유사도를 바탕으로 유사도 높은 강의를 '답변'으로서 제공합니다.


AVISIONS 서비스에 이용된 실제 구현 코드는 아래 github 주소에서 다운받을 수 있습니다.
아래 링크를 통해 사용자는 각자에 맞게 채용 정보, 강의계획서를 추가, 제거, 수정하고 텍스트 유사도 함수를 바꾸어 원하는 결과를 얻을 수 있습니다.

[AVISIONS github 링크](https://github.com/AVISI0NS/searchengine)

※ github 링크에는 채용 정보를 텍스트로 변환하는 크롤링 코드는 포함하고 있지 않습니다. 채용 정보 혹은 궁금한 단어를 직접 영어로 번역기를 이용해 변환한 후 이용해주세요.




# AVISIONS search engine code





홈페이지에서 확인할 수 있는 '체험하기'는 16가지의 시나리오를 바탕으로 사용자가 쉽게 체험할 수 있도록 만든 데모 서비스입니다.
현 github는 미리 구성되어 있던 데모 16가지의 시나리오가 아닌 사용자가 직접 강의계획서, 채용 페이지 내용을 변경하고 유사도를 측정할 수 있는 기능을 위한 페이지입니다.
현 페이지를 통해 사용자는 직접 체험 가능한 실제 구현 코드 및 설명을 확인할 수 있습니다.


## 1. 파일 구성 및 순서


AVISIONS는 채용 정보와 강의계획서 사이의 텍스트 유사도를 구하기 위해 구글, 네이버 등의 검색 사이트에서 볼 수 있는 search engine 코드를 이용하고 있습니다.

### 파일 구성

크게 4가지 python파일과 3가지 text파일로 구성되어 있습니다.
- python file :

    CustomScoring.py

    evaluate.py

    make_index.py

    QueryResult.py


- text file(doc 폴더) :

    document.txt

    query.txt

    relevance.txt

### 코드 실행 순서


1) doc 폴더 속 query.txt에는 채용 정보가 저장되어 있습니다. 직접 채용 정보를 추가, 수정, 제거해 사용자에 맞게 바꿔주세요.  
2) doc 폴더 속 document.txt에는 강의계획서가 저장되어 있습니다. 직접 강의계획서를 추가, 수정, 제거해 사용자에 맞게 바꿔주세요.  
3) 필요한 라이브러리를 모두 다운로드 받은 후 make_index.py -> QueryResult.py -> evaluate.py 앞의 세 가지 python 파일을 순서대로 실행해 아래 예시와 같은 결과를 얻을 수 있습니다. 
  


 
 
## 2. 코드 설명 및 추가 기능


1) 질문과 답변(query and document)
  

구글, 네이버 등의 검색창에 '질문'을 던지면 검색결과로 '답변'이 돌아옵니다. 이 또한 텍스트 유사도를 바탕으로 미리 저장되어 있던 '답변' 중 '질문'과 가장 가까운 '답변'을 가져오는 것입니다. 이때 '질문'에 대해 최대한 관련있는 '답변'을 잘 감지하고 빠르게 반응하기 위해 여러가지 전처리, 별도의 저장 과정이 필요합니다. 
  
  
2) 전처리 과정


위에서 언급한 것과 같이 검색시 더 좋은 결과를 보이기 위해서는 여러가지 전처리 과정이 필요합니다. make_index.py와 QueryResult.py에서 여러가지 전처리 과정을 거치게 됩니다. 구체적인 과정은 아래 세 단계와 같습니다.
  
2-1) 공백(스페이스바)을 기준으로 단어를 잘라 특수문자를 모두 제거한 후 lemmatize를 이용해 단어를 사전형으로 변환해줍니다.  
2-2) 그 후 형태소 분석을 통해 명사, 형용사, 동사 등의 문장 전체의 의미에 있어서 중요성이 큰 형태소에 대해 가중치를 부여합니다.  
2-3) 다른 문서와 비교해 다른 문서보다 더 희귀하게 등장하는 단어를 keywords로 인식하여 이에 더 큰 가중치를 부여합니다.  
  
그 외에도 여러가지 전처리를 추가할 수 있습니다.
  
  
3) 텍스트 유사도 계산 방법


텍스트 유사도를 계산하는 방법은 굉장히 다양합니다. 단순히 겹치는 단어를 세는 빈도를 이용해도 되지만 좋은 성능이 안나올 확률이 높습니다. 희귀하게 나타나는 단어에 더 높은 가중치를 주는 tf-idf, 좋은 성능으로 잘 알려진 BM25 등 여러가지 방법이 존재합니다. 사용자는 CustomScoring.py을 통해 직접 정의한 측정 방법을 이용할 수 있습니다. 
  
  
4) 정답 파일  
  

만약 '질문'에 가장 필요한 '답변'이 무엇인지 미리 알고있다면 search engine은 여러가지 측정 방법을 시행해보며 정답과 비교해 가장 정답에 근접한 값을 내는 방법을 찾을 수 있을 것입니다. doc 폴더 속의 relevance.txt는 '정답 파일'이라고 생각하시면 됩니다. 현재에는 데이터가 들어가있지 않은 사용자가 유사하다고 생각되는 채용 정보와 강의계획서의 index를 쌍으로 적어 넣는다면 더욱 원하는 결과를 얻을 수 있습니다.
  
  
5) 결과


evaluate.py를 통해 결과를 print할 수 있습니다. 만약 relevance.txt를 입력해두었다면 정답과 얼마나 유사한 결과를 냈는지에 대한 점수도 얻을 수 있습니다. 


## 3. 예시


현재 doc 폴더에는 네이버, 카카오, MicroSoft, 삼성전자, 하이닉스 등의 총 19가지의 직무의 채용 정보, 서울대학교의 10개 강좌의 강의계획서가 저장되어 있습니다. 채용 정보와 강의계획서를 바탕으로 evaluate.py 실행한 결과는 아래와 같습니다.


![코딩 결과3](https://user-images.githubusercontent.com/98640306/154391500-6e85639a-6e0f-4e8b-acd0-8a267aaaf300.PNG)
 
 
## 4. 참고 자료

[AVISIONS 홈페이지](https://avisi0ns.github.io/)

[서울대학교 수강신청 페이지](https://sugang.snu.ac.kr/)

[마이크로소프트 채용 페이지](https://careers.microsoft.com/us/en)

[네이버 채용 페이지](https://recruit.navercorp.com/naver/recruitMain)

[카카오 채용 페이지](https://careers.kakao.com/krewstory)

[SK 하이닉스 채용](https://recruit.skhynix.com/servlet/mnus_main.view)

[whoosh search engine](https://github.com/mchaput/whoosh)

